<!doctype html>
<html lang="cz">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Teacher digital Agency</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/glyphicons.css') }}">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/eonasdan-bootstrap-datetimepicker/4.17.49/css/bootstrap-datetimepicker.min.css'>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
	  <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js'></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/eonasdan-bootstrap-datetimepicker/4.17.49/js/bootstrap-datetimepicker.min.js'></script>
    
  </head>
<body class="p-3">
    <form method="post" class="rezervovani-form text-na-bilem form-floating">
      <!--

        INFORMACE STUDENTA

      -->
      <div class="row g-2">
        <label class="form-label">Informace studenta</label>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control" id="firstName" placeholder="Jméno">
              <label for="firstName">Jméno</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control" id="lastName" placeholder="Příjmení">
              <label for="lastName">Příjmení</label>
            </div>
          </div>
      <!--

        KONTAKT STUDENTA

      -->
        <label class="form-label">Kontakt studenta</label>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control" id="email" placeholder="Email">
              <label for="firstName">Email</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control" id="phone" placeholder="Telefon">
              <label for="lastName">Telefon</label>
            </div>
          </div>
      <!--

        INFORMACE REZERVACE

      -->
        <label class="form-label">Informace rezervace</label>
        <div class="form-floating">
          <input class="form-control" placeholder="Lokace" id="location">
          <label for="notes">Lokace</label>
        </div>
        <div class="input-group">
          <span class="input-group-text">Předmět</span>
          <select class="form-select" title="Předmět" aria-label="subject" id="subject">
            {% if tags %}
              {% for tag in tags %}
                <option value="{{tag.uuid}}">{{tag.name}}</option>
              {% endfor %}
            {% else %}
            <option value=""></option>
            {% endif %}
          </select>
        </div>
        <div class="form-floating">
          <textarea class="form-control" placeholder="Poznámky pro lektora" id="notes" style="height: 100px"></textarea>
          <label for="notes">Poznámky pro lektora</label>
        </div>
      <!--

        DATUM - ČAS REZERVACE

      -->
      <label class="form-label">Start time</label>
        <div class="input-group date">
          <input class="form-control" placeholder="YYYY-MM-DD HH" id="StartTime"/>
        </div>
      <label class="form-label">End time</label>
        <div class="input-group date">
          <input class="form-control" placeholder="YYYY-MM-DD HH" id="EndTime"/>
        </div>
      


      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for message in messages %}
          <div class="error danger">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      <button type="submit" id="submit-button" class="btn btn-primary">Rezerovat</button>
    
    </form>
    <script>
      if (/Mobi/.test(navigator.userAgent)) {
  // if mobile device, use native pickers
  $(".date input").attr("type", "date");
  $(".time input").attr("type", "time");
} else {
  $("#StartTime").datetimepicker({
    locale: 'cs',
    useCurrent: true,
    format: "YYYY-MM-DD HH",
    date: moment().format("YYYY-MM-DD HH"),
    sideBySide: true,
    showTodayButton: true,
    minDate: moment().add(1, 'hours').format("YYYY-MM-DD HH"),
  });
  $("#EndTime").datetimepicker({
    locale: 'cs',
    useCurrent: true,
    format: "YYYY-MM-DD HH",
    date: moment().format("YYYY-MM-DD HH"),
    sideBySide: true,
    showTodayButton: true,
    minDate: moment().add(2, 'hours').format("YYYY-MM-DD HH"),
  });
}
    </script>
    <script>
      document.getElementById('submit-button').addEventListener('click', function() {
            // Collect form data
            const formData = {
                first_name_student: document.getElementById('firstName').value,
                last_name_student: document.getElementById('lastName').value,
                email_student: document.getElementById('email').value,
                number_student: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                notes: document.getElementById('notes').value,
                start_time: document.getElementById('StartTime').value,
                end_time: document.getElementById('EndTime').value,
                subject: document.querySelector('subject').value,
                lecturer_uuid: new URLSearchParams(window.location.search).get('lecturer') // Assuming uuid is a template variable
            };

            // Send POST request
            fetch('/your-post-endpoint', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log(data); // Handle successful response
            })
            .catch(error => {
                console.error('There was an error!', error);
            });
        });
    </script>
</body>
</html>